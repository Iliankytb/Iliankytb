local OrionLib = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Orion/main/source"))()
local Window = OrionLib:MakeWindow({Name = "Cheat Evade", HidePremium = false, IntroEnabled = false, SaveConfig = true, ConfigFolder = "OrionTest"})

local player = game.Players.LocalPlayer
local HumanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
local Humanoid = player.Character:FindFirstChild("Humanoid")
local CandyName = {"CandyCorn","WrappedCandy","Bag"}

_G.AutoFarmCandysNoSecurity = false
_G.AutoFarmCandysSecurity = false
_G.AutoRespawn = false
_G.AutoFarmWins = false
_G.foundCandy = false

local function AutoRespawn()
local player = game.Players.LocalPlayer
local HumanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
local Humanoid = player.Character:FindFirstChild("Humanoid")
if Humanoid.Health > 1 then
game:GetService("ReplicatedStorage").Events.Player.ChangePlayerMode:FireServer(true)
end
end

local function AutoFarmWins()
local player = game.Players.LocalPlayer
local HumanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
local Humanoid = player.Character:FindFirstChild("Humanoid")
local securityPart = game.Workspace:FindFirstChild("SecurityPart") or Instance.new("Part")
            securityPart.Name = "SecurityPart"
            securityPart.Size = Vector3.new(10, 1, 10)
            securityPart.Position = Vector3.new(0, 500, 0)  -- Position en hauteur
            securityPart.Anchored = true
            securityPart.Parent = game.Workspace
            HumanoidRootPart.CFrame = securityPart.CFrame + Vector3.new(0, 3, 0)  -- Téléporte le joueur au-dessus de la Part de sécurité
            wait(0.5)
            securityPart:Destroy()
end


local function Died()
game:GetService("ReplicatedStorage").Events.Player.ChangePlayerMode:FireServer(false)
end
-- Fonction pour auto-farm avec sécurité
local function AutoFarmCandysSecurity()
local player = game.Players.LocalPlayer
local HumanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
local Humanoid = player.Character:FindFirstChild("Humanoid")
    if HumanoidRootPart then
        
        for _, item in ipairs(game.Workspace:GetDescendants()) do
            if table.find(CandyName, item.Name) then
                
                if item:IsA("MeshPart") then
                    HumanoidRootPart.CFrame = item.CFrame
                    _G.foundCandy = true
                    wait(0.1)
_G.foundCandy = false
                    return
                end
            end
        end

        -- Si aucun bonbon ou modèle n'est trouvé, crée une Part de sécurité
        if _G.foundCandy == false then
            local securityPart = game.Workspace:FindFirstChild("SecurityPart") or Instance.new("Part")
            securityPart.Name = "SecurityPart"
            securityPart.Size = Vector3.new(10, 1, 10)
            securityPart.Position = Vector3.new(0, 500, 0)  -- Position en hauteur
            securityPart.Anchored = true
            securityPart.Parent = game.Workspace
            HumanoidRootPart.CFrame = securityPart.CFrame + Vector3.new(0, 3, 0)  -- Téléporte le joueur au-dessus de la Part de sécurité
            wait(0.5)
            securityPart:Destroy()
        end
    end
end

-- Fonction pour auto-farm sans sécurité
local function AutoFarmCandysNoSecurity()
local player = game.Players.LocalPlayer
local HumanoidRootPart = player.Character:FindFirstChild("HumanoidRootPart")
local Humanoid = player.Character:FindFirstChild("Humanoid")
    if HumanoidRootPart then
        for _, item in ipairs(game.Workspace:GetDescendants()) do
            if table.find(CandyName, item.Name) then
                if item:IsA("MeshPart") then
_G.foundCandy = true
                    HumanoidRootPart.CFrame = item.CFrame
                    wait(0.1)
_G.foundCandy = false
                    return
                end
            end
        end
    end
end

local MainTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local EspTab = Window:MakeTab({
    Name = "Esp",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})
local SectionEspPlayers = EspTab:AddSection({
    Name = "Esp Player"
})

local SectionEspBot = EspTab:AddSection({
    Name = "Esp Bot"
})

local SectionEspCandys = EspTab:AddSection({
    Name = "Esp Candys"
})

local SectionMain = EspTab:AddSection({
    Name = "Auto Farm"
})

MainTab:AddToggle({
    Name = "Auto Farm Win",
    Default = false,
    Callback = function(Value)
        _G.AutoFarmWins = Value
        while _G.AutoFarmWins == true do
            AutoFarmWins()
wait()
        end
    end    
})

local SectionHalloweenevent = MainTab:AddSection({
    Name = "Halloween Event"
})

MainTab:AddToggle({
    Name = "Auto Farm Candy (with no security)",
    Default = false,
    Callback = function(Value)
        _G.AutoFarmCandysNoSecurity = Value
        while _G.AutoFarmCandysNoSecurity == true do
            AutoFarmCandysNoSecurity()
            wait(0.5)
        end
    end    
})

MainTab:AddToggle({
    Name = "Auto Farm Candy (with security)",
    Default = false,
    Callback = function(Value)
        _G.AutoFarmCandysSecurity = Value
        while _G.AutoFarmCandysSecurity == true do
            AutoFarmCandysSecurity()
            wait(0.5)
        end
    end    
})

-- Vérifie les objets existants et ceux ajoutés dynamiquement
local function CheckForCandy(child)
    if table.find(CandyName, child.Name) then
        if _G.AutoFarmCandysNoSecurity == true then
            AutoFarmCandysNoSecurity()
        elseif _G.AutoFarmCandysSecurity == true then
            AutoFarmCandysSecurity()
        end
    end
end
local SectionMisc = MainTab:AddSection({
    Name = "Misc"
})

MainTab:AddToggle({
    Name = "Auto Respawn",
    Default = false,
    Callback = function(Value)
        _G.AutoRespawn = Value
        while _G.AutoRespawn == true do
            AutoRespawn()
        end
    end    
})

MainTab:AddButton({
    Name = "Go To Menu (You Can't Respawn After)",
    Callback = function()
Died()
    end    
})
-- Surveille les nouveaux objets ajoutés dans Workspace
game.Workspace.ChildAdded:Connect(CheckForCandy)

OrionLib:Init()

