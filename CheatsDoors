-- Variables
local player = game.Players.LocalPlayer
local screenGui = Instance.new("ScreenGui", player.PlayerGui)
screenGui.Name = "GuiPlayer"
screenGui.ResetOnSpawn = false -- Conserver le GUI après la réinitialisation

-- Main Frame
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0.35, 0, 0.4, 0)
frame.Position = UDim2.new(0.325, 0, 0.3, 0)
frame.BackgroundColor3 = Color3.fromRGB(60, 60, 60) -- Couleur de fond sombre pour contraste
frame.BackgroundTransparency = 0.25
frame.Visible = false

-- Ajout d'un gradient sur le Frame
local gradient = Instance.new("UIGradient", frame)
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(60, 60, 60)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(90, 90, 90))
}

-- UI Stroke et Coin arrondi pour le Main Frame
local uistroke = Instance.new("UIStroke", frame)
uistroke.Thickness = 3
uistroke.Color = Color3.fromRGB(20, 20, 20) -- Bordure sombre pour un bon contraste
uistroke.LineJoinMode = Enum.LineJoinMode.Round

local uicorner = Instance.new("UICorner", frame)
uicorner.CornerRadius = UDim.new(0.1, 0) -- Courbes plus douces

-- Bouton pour afficher/masquer le GUI
local closeopen = Instance.new("TextButton", screenGui)
closeopen.Size = UDim2.new(0, 120, 0, 40)
closeopen.Position = UDim2.new(0.5, -60, 0.2, 0)
closeopen.Text = "Toggle Menu"
closeopen.TextColor3 = Color3.fromRGB(255, 255, 255)
closeopen.Font = Enum.Font.GothamBold
closeopen.TextSize = 18
closeopen.BackgroundColor3 = Color3.fromRGB(85, 170, 255) -- Couleur vive pour attirer l'attention
uistroke:Clone().Parent = closeopen
uicorner:Clone().Parent = closeopen

-- Ajout d'un gradient sur le bouton closeopen
local buttonGradient = Instance.new("UIGradient", closeopen)
buttonGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(85, 170, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(65, 150, 255))
}

local function toggleFrame()
    frame.Visible = not frame.Visible
end

closeopen.MouseButton1Click:Connect(toggleFrame)

-- Scrolling Frame à l'intérieur du Main Frame
local scrollingFrame = Instance.new("ScrollingFrame", frame)
scrollingFrame.Size = UDim2.new(1, 0, 1, 0)
scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 800) -- Ajusté pour plus de boutons
scrollingFrame.ScrollBarThickness = 8
scrollingFrame.BackgroundTransparency = 1 -- Fond transparent pour scrollingFrame

-- UIListLayout pour les boutons
local listLayout = Instance.new("UIListLayout", scrollingFrame)
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 10) -- Espacement entre les boutons

-- Fonction d'aide pour créer des boutons
local function createButton(text, parent)
    local button = Instance.new("TextButton", parent)
    button.Size = UDim2.new(1, 0, 0, 50)
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.GothamBold
    button.TextSize = 16
    button.BackgroundColor3 = Color3.fromRGB(50, 50, 50) -- Gris foncé pour contraste
    uistroke:Clone().Parent = button
    uicorner:Clone().Parent = button

    -- Ajout d'un gradient sur chaque bouton
    local buttonGradient = Instance.new("UIGradient", button)
    buttonGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(70, 70, 70)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 100, 100))
    }

    return button
end

-- ESP Button
local espButton = createButton("ESP Off", scrollingFrame)

-- No Lag Button
local NoLagButton = createButton("No Lag Off", scrollingFrame)

-- ProximityPromptNoCooldown Button
local NoCooldownPromptButton = createButton("No Cooldown Prompt Off", scrollingFrame)

-- Full Bright Button
local FullBrightButton = createButton("Full Bright Off", scrollingFrame)

-- God Mode Button
local GodModeButton = createButton("God Mode Off", scrollingFrame)

-- AutoLoot Button
local autoLootButton = createButton("Auto Loot Off", scrollingFrame)

-- Fly Button
local flyButton = createButton("Fly Off", scrollingFrame)

-- Auto Heal Button
local autoHealButton = createButton("Auto Heal Off", scrollingFrame)

-- Speed Boost Button
local speedBoostButton = createButton("Speed Boost Off", scrollingFrame)

-- ESP Functions
local highlightColor = Color3.fromRGB(255, 0, 0)
local highlightTransparency = 0.5

local espTargets = {}

local function updateEspTargets()
    espTargets = {} -- Reset table
    for _, model in pairs(workspace:GetDescendants()) do
        if model:IsA("Model") or model:IsA("Part") then
            local nameLower = model.Name:lower()
            if nameLower == "locker_large" or nameLower == "locker_small" or nameLower == "door" or nameLower == "sideroomdupe" or nameLower == "wardrobe" or nameLower == "gold" or nameLower == "goldpile" or nameLower == "MineGenerator" or nameLower == "fuse" or nameLower == "key" or nameLower == "key_holder" or nameLower == "rift" or nameLower == "Chest" or nameLower == "Lockpick" or nameLower == "Battery" or nameLower == "FlashLight" or nameLower == "figure_rig" or nameLower == "figure" or nameLower == "rush" or nameLower == "ambush" or nameLower == "Screech" or nameLower == "halt" or nameLower == "Rushed" or nameLower == "LiveHintBook" or nameLower == "drawercontainer" then
                table.insert(espTargets, model)
            end
        end
    end
end

local function highlightModel(model)
    if not model:FindFirstChildOfClass("Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.Parent = model
        highlight.FillColor = highlightColor
        highlight.FillTransparency = highlightTransparency
        highlight.OutlineTransparency = highlightTransparency
    end

    if not model:FindFirstChildOfClass("BillboardGui") then
        local billboard = Instance.new("BillboardGui")
        billboard.Parent = model
        billboard.Adornee = model
        billboard.AlwaysOnTop = true
        billboard.Size = UDim2.new(0, 100, 0, 50)
        billboard.StudsOffset = Vector3.new(0, 2, 0)

        local textLabel = Instance.new("TextLabel")
        textLabel.Parent = billboard
        textLabel.Size = UDim2.new(1, 0, 1, 0)
        textLabel.BackgroundTransparency = 1
        textLabel.Text = model.Name
        textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    end
end

local function highlightModels()
    for _, model in pairs(espTargets) do
        highlightModel(model)
    end
end

local function clearHighlights()
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("Highlight") or obj:IsA("BillboardGui") then
            obj:Destroy()
        end
    end
end

-- ESP Activation
local espActive = false

espButton.MouseButton1Click:Connect(function()
    espActive = not espActive

    if espActive then
        espButton.Text = "ESP On"
        updateEspTargets() -- Update targets when toggled on
        highlightModels()
    else
        espButton.Text = "ESP Off"
        clearHighlights()
    end
end)

-- No Lag Functions
local noLagActive = false
local originalMaterials = {}

local function setSmoothPlastic()
    for _, part in pairs(workspace:GetDescendants()) do
        if part:IsA("Part") then
            table.insert(originalMaterials, {part = part, material = part.Material})
            part.Material = Enum.Material.SmoothPlastic
        end
    end
end

local function restoreMaterials()
    for _, entry in pairs(originalMaterials) do
        if entry.part and entry.material then
            entry.part.Material = entry.material
        end
    end
end

NoLagButton.MouseButton1Click:Connect(function()
    noLagActive = not noLagActive
    if noLagActive then
        NoLagButton.Text = "No Lag On"
        setSmoothPlastic()
    else
        NoLagButton.Text = "No Lag Off"
        restoreMaterials()
    end
end)

-- ProximityPromptNoCooldown Function
local noCooldownPromptActive = false

NoCooldownPromptButton.MouseButton1Click:Connect(function()
    noCooldownPromptActive = not noCooldownPromptActive

    if noCooldownPromptActive then
        NoCooldownPromptButton.Text = "No Cooldown Prompt On"
        for _, prompt in pairs(workspace:GetDescendants()) do
            if prompt:IsA("ProximityPrompt") then
                prompt.RequiresLineOfSight = false
                prompt.HoldDuration = 0
            end
        end
    else
        NoCooldownPromptButton.Text = "No Cooldown Prompt Off"
        for _, prompt in pairs(workspace:GetDescendants()) do
            if prompt:IsA("ProximityPrompt") then
                prompt.HoldDuration = 0.5 -- Remet la durée de maintien par défaut
            end
        end
    end
end)

-- Full Bright Function
local fullBrightActive = false

FullBrightButton.MouseButton1Click:Connect(function()
    fullBrightActive = not fullBrightActive

    if fullBrightActive then
        FullBrightButton.Text = "Full Bright On"
        game.Lighting.Brightness = 100 -- Ajuste la luminosité
        game.Lighting.Ambient = Color3.new(1, 1, 1) -- Fait briller tout
    else
        FullBrightButton.Text = "Full Bright Off"
        game.Lighting.Brightness = 1 -- Luminosité par défaut
        game.Lighting.Ambient = Color3.new(0.5, 0.5, 0.5) -- Ambiance par défaut
    end
end)

-- God Mode Function
local godModeActive = false

GodModeButton.MouseButton1Click:Connect(function()
    godModeActive = not godModeActive

    if godModeActive then
        GodModeButton.Text = "God Mode On"
        player.Character.Humanoid.MaxHealth = math.huge -- Santé infinie
        player.Character.Humanoid.Health = player.Character.Humanoid.MaxHealth
    else
        GodModeButton.Text = "God Mode Off"
        player.Character.Humanoid.MaxHealth = 100 -- Santé par défaut
        player.Character.Humanoid.Health = player.Character.Humanoid.MaxHealth
    end
end)

-- Auto Loot Function
local autoLootActive = false

autoLootButton.MouseButton1Click:Connect(function()
    autoLootActive = not autoLootActive

    if autoLootActive then
        autoLootButton.Text = "Auto Loot On"
        -- Fonctionnalité d'auto-loot (vous pouvez implémenter un script qui interagit automatiquement avec des objets proches)
    else
        autoLootButton.Text = "Auto Loot Off"
        -- Désactiver la fonctionnalité d'auto-loot
    end
end)

-- Fly Function
local flyActive = false

flyButton.MouseButton1Click:Connect(function()
    flyActive = not flyActive

    if flyActive then
        flyButton.Text = "Fly On"
        -- Ajoutez ici votre fonction de vol personnalisée
    else
        flyButton.Text = "Fly Off"
        -- Désactiver la fonction de vol
    end
end)

-- Auto Heal Function
local autoHealActive = false

autoHealButton.MouseButton1Click:Connect(function()
    autoHealActive = not autoHealActive

    if autoHealActive then
        autoHealButton.Text = "Auto Heal On"
        -- Ajouter une fonctionnalité pour régénérer automatiquement la santé
    else
        autoHealButton.Text = "Auto Heal Off"
        -- Désactiver la régénération automatique
    end
end)

-- Speed Boost Function
local speedBoostActive = false

speedBoostButton.MouseButton1Click:Connect(function()
    speedBoostActive = not speedBoostActive

    if speedBoostActive then
        speedBoostButton.Text = "Speed Boost On"
        player.Character.Humanoid.WalkSpeed = 50 -- Vitesse boostée
    else
        speedBoostButton.Text = "Speed Boost Off"
        player.Character.Humanoid.WalkSpeed = 16 -- Vitesse par défaut
    end
end)


   while true do
if speedBoostActive then
        speedBoostButton.Text = "Speed Boost On"
        player.Character.Humanoid.WalkSpeed = 50 -- Vitesse boostée
    else
        speedBoostButton.Text = "Speed Boost Off"
        player.Character.Humanoid.WalkSpeed = 16 -- Vitesse par défaut
    end
    if autoHealActive then
        autoHealButton.Text = "Auto Heal On"
        -- Ajouter une fonctionnalité pour régénérer automatiquement la santé
    else
        autoHealButton.Text = "Auto Heal Off"
        -- Désactiver la régénération automatique
    end
if autoLootActive then
        autoLootButton.Text = "Auto Loot On"
        -- Fonctionnalité d'auto-loot (vous pouvez implémenter un script qui interagit automatiquement avec des objets proches)
    else
        autoLootButton.Text = "Auto Loot Off"
        -- Désactiver la fonctionnalité d'auto-loot
    end
if noLagActive then
        NoLagButton.Text = "No Lag On"
        setSmoothPlastic()
    else
        NoLagButton.Text = "No Lag Off"
        restoreMaterials()
    end
if espActive then
        espButton.Text = "ESP On"
        updateEspTargets() -- Update targets when toggled on
        highlightModels()
    else
        espButton.Text = "ESP Off"
        clearHighlights()
    end
end
