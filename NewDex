-- Créer le GUI
local player = game.Players.LocalPlayer
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Bouton pour ouvrir/fermer le Scrolling Frame
local toggleButton = Instance.new("TextButton")
toggleButton.Size = UDim2.new(0.05, 0, 0.05, 0)
toggleButton.Position = UDim2.new(0.95, -50, 0, 50) -- En haut à droite
toggleButton.Text = "Open"
toggleButton.Parent = screenGui

-- Créer le Scrolling Frame
local scrollingFrame = Instance.new("ScrollingFrame")
scrollingFrame.Size = UDim2.new(0.3, 0, 1, 0)
scrollingFrame.Position = UDim2.new(0.7, 0, 0, 0) -- À droite pour ne pas gêner les joueurs
scrollingFrame.CanvasSize = UDim2.new(0, 0, 5000, 0)
scrollingFrame.Visible = false -- Invisible au départ
scrollingFrame.Parent = screenGui

local uiListLayout = Instance.new("UIListLayout")
uiListLayout.Parent = scrollingFrame
uiListLayout.SortOrder = Enum.SortOrder.LayoutOrder

-- Fonction pour ajouter un objet dans la liste
local function addItemToGui(object)
    local textLabel = Instance.new("TextLabel")
    textLabel.Size = UDim2.new(1, 0, 0, 30)
    textLabel.Text = object.Name -- Utiliser le nom simple de l'objet
    textLabel.TextScaled = true
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255) -- Couleur blanche pour le texte
    textLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0) -- Fond noir pour contraste
    textLabel.Parent = scrollingFrame
end

-- Lister tous les objets dans Workspace, StarterGui, et ReplicatedStorage
local function listObjects(service)
    for _, obj in ipairs(service:GetDescendants()) do
        addItemToGui(obj)
    end
end

listObjects(workspace)
listObjects(game.CoreGui)
listObjects(game.CorePackage)
listObjects(game.Players)
listObjects(game.ReplicatedFirst)
listObjects(game.StarterPack)
listObjects(game.StarterPlayer)
listObjects(game.StarterCharacter)
listObjects(game.ServerStorage)
listObjects(game.StarterGui)
listObjects(game.ReplicatedStorage)

-- Mettre à jour dynamiquement si de nouveaux objets sont ajoutés
workspace.DescendantAdded:Connect(addItemToGui)
game.StarterGui.DescendantAdded:Connect(addItemToGui)
game.ReplicatedStorage.DescendantAdded:Connect(addItemToGui)

-- Fonction pour basculer l'affichage du Scrolling Frame
local isOpen = false
toggleButton.MouseButton1Click:Connect(function()
    isOpen = not isOpen
    scrollingFrame.Visible = isOpen
    toggleButton.Text = isOpen and "Close" or "Open"
end)
