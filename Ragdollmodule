
local v_u_1 = script.Parent
v_u_1:WaitForChild("Torso")
local v_u_2 = v_u_1:FindFirstChildOfClass("Humanoid")
v_u_1.Humanoid.BreakJointsOnDeath = false
v_u_1.Humanoid.RequiresNeck = false
local v_u_3 = {
	["Neck"] = { CFrame.new(0, 1, 0, 0, -1, 0, 1, 0, -0, 0, 0, 1), CFrame.new(0, -0.5, 0, 0, -1, 0, 1, 0, -0, 0, 0, 1) },
	["Left Shoulder"] = { CFrame.new(-1.3, 0.75, 0, -1, 0, 0, 0, -1, 0, 0, 0, 1), CFrame.new(0.2, 0.75, 0, -1, 0, 0, 0, -1, 0, 0, 0, 1) },
	["Right Shoulder"] = { CFrame.new(1.3, 0.75, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1), CFrame.new(-0.2, 0.75, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1) },
	["Left Hip"] = { CFrame.new(-0.5, -1, 0, 0, 1, -0, -1, 0, 0, 0, 0, 1), CFrame.new(0, 1, 0, 0, 1, -0, -1, 0, 0, 0, 0, 1) },
	["Right Hip"] = { CFrame.new(0.5, -1, 0, 0, 1, -0, -1, 0, 0, 0, 0, 1), CFrame.new(0, 1, 0, 0, 1, -0, -1, 0, 0, 0, 0, 1) }
}
local v_u_4 = {
	["RagdollAttachment"] = true,
	["RagdollConstraint"] = true,
	["ColliderPart"] = true
}
local v_u_5 = Instance.new("BoolValue")
v_u_5.Name = "IsRagdoll"
v_u_5.Parent = v_u_1
v_u_1:SetAttribute("LastRag")
function replaceJoints()
	-- upvalues: (copy) v_u_1, (copy) v_u_3, (copy) v_u_2
	for _, v6 in pairs(v_u_1:GetDescendants()) do
		if v6:IsA("Motor6D") then
			if not v_u_3[v6.Name] then
				return
			end
			v6.Enabled = false
			local v7 = Instance.new("Attachment")
			local v8 = Instance.new("Attachment")
			v7.CFrame = v_u_3[v6.Name][1]
			v8.CFrame = v_u_3[v6.Name][2]
			v7.Name = "RagdollAttachment"
			v8.Name = "RagdollAttachment"
			local v9 = v6.Part1
			if v9 then
				local v10 = Instance.new("Part")
				v10.Name = "ColliderPart"
				v10.Size = v9.Size / 1.7
				v10.Massless = true
				v10.CFrame = v9.CFrame
				v10.Transparency = 1
				local v11 = Instance.new("WeldConstraint")
				v11.Part0 = v10
				v11.Part1 = v9
				v11.Parent = v10
				v10.Parent = v9
			end
			local v12 = Instance.new("BallSocketConstraint")
			v12.Attachment0 = v7
			v12.Attachment1 = v8
			v12.Name = "RagdollConstraint"
			v12.Radius = 0.15
			v12.LimitsEnabled = true
			v12.TwistLimitsEnabled = false
			v12.MaxFrictionTorque = 0
			v12.Restitution = 0
			v12.UpperAngle = 90
			v12.TwistLowerAngle = -45
			v12.TwistUpperAngle = 45
			if v6.Name == "Neck" then
				v12.TwistLimitsEnabled = true
				v12.UpperAngle = 45
				v12.TwistLowerAngle = -70
				v12.TwistUpperAngle = 70
			end
			v7.Parent = v6.Part0
			v8.Parent = v6.Part1
			v12.Parent = v6.Parent
		end
	end
	v_u_2.AutoRotate = false
	v_u_1:SetAttribute("LastRag", tick())
end
function resetJoints()
	-- upvalues: (copy) v_u_2, (copy) v_u_1, (copy) v_u_4
	if v_u_2.Health >= 1 then
		for _, v13 in pairs(v_u_1:GetDescendants()) do
			if v_u_4[v13.Name] then
				v13:Destroy()
			end
			if v13:IsA("Motor6D") then
				v13.Enabled = true
			end
		end
		v_u_2.AutoRotate = true
	end
end
function Ragdoll(p14)
	if p14 then
		replaceJoints()
	else
		resetJoints()
	end
end
v_u_5.Changed:Connect(Ragdoll)
v_u_2.Died:Once(function()
	-- upvalues: (copy) v_u_5
	v_u_5.Value = true
end)
